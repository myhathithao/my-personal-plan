<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Year ğŸŒ¸ Personal Planner</title>
  <meta name="description" content="A beautiful personal productivity and year planning dashboard." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,600;0,700;0,800;1,400&family=Playfair+Display:ital,wght@0,600;1,500&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/calendar.css" />
  <link rel="stylesheet" href="css/auth.css" />
</head>

<body>

  <!-- ===== LOGIN OVERLAY (shown until authenticated) ===== -->
  <div id="loginOverlay" class="login-overlay">
    <div class="login-card">
      <div class="login-brand">
        <span class="login-flower">ğŸŒ¸</span>
        <div>
          <h1 class="login-title">My Year</h1>
          <p class="login-tagline">Your beautiful personal planner</p>
        </div>
      </div>

      <div class="login-features">
        <div class="login-feature">ğŸ“… Calendar &amp; To-dos</div>
        <div class="login-feature">ğŸ“¿ Habit Tracker</div>
        <div class="login-feature">ğŸ“– Daily Diary</div>
        <div class="login-feature">â˜ï¸ Sync across devices</div>
      </div>

      <button id="googleSignInBtn" class="google-signin-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="22" height="22">
          <path fill="#EA4335"
            d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z" />
          <path fill="#4285F4"
            d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z" />
          <path fill="#FBBC05"
            d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z" />
          <path fill="#34A853"
            d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.18 1.48-4.97 2.36-8.16 2.36-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z" />
        </svg>
        Sign in with Google
      </button>

      <!-- Divider -->
      <div class="login-divider"><span>or</span></div>

      <!-- Guest mode option -->
      <button id="guestModeBtn" class="guest-mode-btn">
        Continue without account â†’
      </button>
      <p class="guest-note">ğŸ’¾ Data saved in this browser only Â· no sync</p>

      <p id="loginLoadingMsg" class="login-loading" style="display:none">â³ Loading your plannerâ€¦</p>
      <p id="loginError" class="login-error" style="display:none"></p>
      <p class="login-privacy">ğŸ”’ Your data is private â€” only you can see your planner.</p>
    </div>
  </div>

  <!-- ===== APP CONTAINER (hidden until authenticated) ===== -->
  <div id="appContainer" class="hidden">
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <span class="brand-flower">ğŸŒ¸</span>
        <span class="brand-text">My Year</span>
      </div>

      <!-- Signed-in user profile -->
      <div class="sidebar-user" id="sidebarUser" style="display:none">
        <img id="sidebarUserPhoto" class="sidebar-user-photo" src="" alt="" style="display:none" />
        <span id="sidebarUserName" class="sidebar-user-name">You</span>
        <button id="signOutBtn" class="sidebar-signout-btn" title="Sign out">â†©</button>
      </div>

      <ul class="nav-list">
        <li><a href="#" class="nav-link active" data-page="dashboard" id="nav-dashboard"><span
              class="nav-icon">ğŸ </span><span class="nav-label">Dashboard</span></a></li>
        <li><a href="#" class="nav-link" data-page="goals" id="nav-goals"><span class="nav-icon">ğŸ¯</span><span
              class="nav-label">Goals</span></a></li>
        <li><a href="#" class="nav-link" data-page="calendar" id="nav-calendar"><span class="nav-icon">ğŸ“…</span><span
              class="nav-label">Calendar</span></a></li>
        <li><a href="#" class="nav-link" data-page="ideas" id="nav-ideas"><span class="nav-icon">ğŸ’¡</span><span
              class="nav-label">Ideas</span></a></li>
        <li><a href="#" class="nav-link" data-page="habits" id="nav-habits"><span class="nav-icon">ğŸ“¿</span><span
              class="nav-label">Habits</span></a></li>
        <li><a href="#" class="nav-link" data-page="diary" id="nav-diary"><span class="nav-icon">ğŸ“–</span><span
              class="nav-label">Diary</span></a></li>
        <li><a href="#" class="nav-link" data-page="stats" id="nav-stats"><span class="nav-icon">ğŸ“Š</span><span
              class="nav-label">Progress</span></a></li>
        <li><a href="#" class="nav-link" data-page="pomodoro" id="nav-pomodoro"><span class="nav-icon">â±ï¸</span><span
              class="nav-label">Focus</span></a></li>
      </ul>
      <!-- Theme switcher -->
      <div class="theme-switcher" id="themeSwitcher">
        <span class="theme-label">ğŸ¨</span>
        <div class="theme-options">
          <button class="theme-dot active" data-theme="blossom" title="Blossom (Pink & Green)"></button>
          <button class="theme-dot" data-theme="ocean" title="Ocean (Blue & Yellow)"></button>
          <button class="theme-dot" data-theme="minimal" title="Minimal (Black & White)"></button>
        </div>
      </div>
      <button class="sidebar-collapse-btn" id="sidebarToggle" title="Collapse sidebar">â€¹</button>
    </nav>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="main-content" id="mainContent">

      <!-- DASHBOARD PAGE -->
      <section class="page active" id="page-dashboard">
        <div class="page-header">
          <h1 class="page-title">Good morning, lovely! ğŸŒ·</h1>
          <p class="page-date" id="dashDate"></p>
        </div>

        <!-- Quote Card -->
        <div class="quote-card" id="quoteCard">
          <span class="quote-mark">"</span>
          <p class="quote-text" id="quoteText">Loading...</p>
          <p class="quote-author" id="quoteAuthor"></p>
          <button class="btn-icon quote-refresh" id="refreshQuote" title="New quote">â†»</button>
        </div>

        <!-- Quick Grid -->
        <div class="dash-grid">
          <!-- Today's Habits -->
          <div class="card dash-habits">
            <div class="card-header">
              <h2>ğŸ“¿ Today's Habits</h2>
              <a href="#" class="card-link" data-page="habits">View all â†’</a>
            </div>
            <div id="dashHabits" class="habit-mini-list"></div>
          </div>

          <!-- Missed Tasks -->
          <div class="card dash-missed">
            <div class="card-header">
              <h2>ğŸ”” Gentle Reminders</h2>
              <a href="#" class="card-link" data-page="calendar">Calendar â†’</a>
            </div>
            <div id="dashMissed" class="missed-list"></div>
          </div>

          <!-- Weekly Goal -->
          <div class="card dash-weekly">
            <div class="card-header">
              <h2>ğŸ—“ï¸ This Week's Goal</h2>
            </div>
            <p class="weekly-goal-text" id="dashWeeklyGoal">No weekly goal set yet.</p>
          </div>

          <!-- Today's Todo -->
          <div class="card dash-todos">
            <div class="card-header">
              <h2>âœ… Today's To-Dos</h2>
              <a href="#" class="card-link" data-page="calendar">Open â†’</a>
            </div>
            <div id="dashTodos" class="todo-mini-list"></div>
          </div>
        </div>
      </section>

      <!-- GOALS PAGE -->
      <section class="page" id="page-goals">
        <div class="page-header">
          <h1 class="page-title">ğŸ¯ My Goals</h1>
          <p class="page-subtitle">Plan your year, your way. ğŸŒ±</p>
        </div>

        <!-- Year Big Goal -->
        <div class="card goal-year-card">
          <div class="card-header">
            <h2>âœ¨ Year Goal â€” 2026</h2>
            <button class="btn-soft" id="editYearGoalBtn">Edit</button>
          </div>
          <div id="yearGoalDisplay" class="year-goal-display">
            <p class="empty-state">Click Edit to set your big goal for 2026! ğŸ‰</p>
          </div>
          <textarea id="yearGoalInput" class="goal-input hidden" placeholder="What's your biggest dream for 2026? ğŸŒŸ"
            rows="3"></textarea>
          <div id="yearGoalActions" class="goal-actions hidden">
            <button class="btn-primary" id="saveYearGoalBtn">Save ğŸ’¾</button>
            <button class="btn-soft" id="cancelYearGoalBtn">Cancel</button>
          </div>
        </div>

        <!-- Board Toolbar -->
        <div class="board-toolbar">
          <button class="btn-primary" id="addPlanCardBtn">+ Add Card</button>
          <div class="template-groups">
            <div class="template-group">
              <span class="template-group-label">By Season</span>
              <button class="template-chip" data-emoji="ğŸŒ¸" data-title="Spring">ğŸŒ¸ Spring</button>
              <button class="template-chip" data-emoji="â˜€ï¸" data-title="Summer">â˜€ï¸ Summer</button>
              <button class="template-chip" data-emoji="ğŸ‚" data-title="Autumn">ğŸ‚ Autumn</button>
              <button class="template-chip" data-emoji="â„ï¸" data-title="Winter">â„ï¸ Winter</button>
            </div>
            <div class="template-group">
              <span class="template-group-label">Life Areas</span>
              <button class="template-chip" data-emoji="ğŸ’ª" data-title="Health">ğŸ’ª Health</button>
              <button class="template-chip" data-emoji="ğŸ’¼" data-title="Career">ğŸ’¼ Career</button>
              <button class="template-chip" data-emoji="ğŸ’°" data-title="Finance">ğŸ’° Finance</button>
              <button class="template-chip" data-emoji="â¤ï¸" data-title="Relationships">â¤ï¸ Relationships</button>
              <button class="template-chip" data-emoji="ğŸ“š" data-title="Study">ğŸ“š Study</button>
              <button class="template-chip" data-emoji="ğŸŒ±" data-title="Growth">ğŸŒ± Growth</button>
            </div>
            <div class="template-group">
              <span class="template-group-label">PERMA</span>
              <button class="template-chip" data-emoji="ğŸ˜Š" data-title="Positive Emotions">ğŸ˜Š Positivity</button>
              <button class="template-chip" data-emoji="ğŸ®" data-title="Engagement">ğŸ® Engagement</button>
              <button class="template-chip" data-emoji="ğŸ’¬" data-title="Relationships">ğŸ’¬ Connections</button>
              <button class="template-chip" data-emoji="ğŸ¯" data-title="Meaning">ğŸ¯ Meaning</button>
              <button class="template-chip" data-emoji="ğŸ†" data-title="Achievement">ğŸ† Achievement</button>
            </div>
          </div>
        </div>

        <!-- Plan Board (dynamically rendered) -->
        <div class="plan-board" id="planBoard"></div>

        <!-- New Card Modal -->
        <div class="modal-overlay hidden" id="newCardModal">
          <div class="modal">
            <h3>New Plan Card âœ¨</h3>
            <div class="new-card-emoji-row" id="newCardEmojiRow"></div>
            <input type="text" id="newCardTitle" class="text-input"
              placeholder="Card title (e.g. Health, Spring, Q1â€¦)" />
            <div class="modal-actions">
              <button class="btn-primary" id="saveNewCardBtn">Create ğŸ‰</button>
              <button class="btn-soft" id="cancelNewCardBtn">Cancel</button>
            </div>
          </div>
        </div>
      </section>

      <!-- CALENDAR PAGE -->
      <section class="page" id="page-calendar">
        <div class="page-header">
          <h1 class="page-title">ğŸ“… Calendar</h1>
        </div>

        <!-- Weekly Goal Banner -->
        <div class="card weekly-goal-card">
          <div class="card-header">
            <h2>ğŸ—“ï¸ This Week's Goal</h2>
            <button class="btn-soft" id="editWeeklyGoalBtn">Edit</button>
          </div>
          <div id="weeklyGoalDisplay" class="weekly-goal-display"></div>
          <textarea id="weeklyGoalInput" class="goal-input hidden" rows="2"
            placeholder="What's your main focus this week? ğŸŒŸ"></textarea>
          <div id="weeklyGoalActions" class="goal-actions hidden">
            <button class="btn-primary" id="saveWeeklyGoalBtn">Save ğŸ’¾</button>
            <button class="btn-soft" id="cancelWeeklyGoalBtn">Cancel</button>
          </div>

          <!-- Weekly Tasks -->
          <div class="weekly-tasks-section">
            <div class="weekly-tasks-header">ğŸ“‹ This Week's Tasks</div>
            <div class="weekly-task-input-row">
              <input type="text" id="weeklyTaskInput" class="text-input" placeholder="Add a task for this week... âœ¨" />
              <button class="btn-primary" id="addWeeklyTaskBtn">Add</button>
            </div>
            <ul class="weekly-task-list" id="weeklyTaskList"></ul>
          </div>
        </div>

        <!-- Side-by-side: Calendar LEFT, To-do RIGHT -->
        <div class="cal-split-layout">
          <!-- Calendar -->
          <div class="card calendar-card">
            <div class="cal-nav">
              <button class="btn-icon" id="calPrev">â€¹</button>
              <h2 id="calMonthYear"></h2>
              <button class="btn-icon" id="calNext">â€º</button>
            </div>
            <div class="cal-weekdays">
              <div>Sun</div>
              <div>Mon</div>
              <div>Tue</div>
              <div>Wed</div>
              <div>Thu</div>
              <div>Fri</div>
              <div>Sat</div>
            </div>
            <div class="cal-grid" id="calGrid"></div>
          </div>

          <!-- Day Todo Panel -->
          <div class="card day-panel" id="dayPanel">
            <div class="card-header">
              <h2 id="dayPanelTitle">Select a day âœ¨</h2>
            </div>
            <div class="todo-input-row">
              <input type="text" id="todoInput" class="text-input" placeholder="Add a task... ğŸŒ¸" />
              <button class="btn-primary" id="addTodoBtn">Add</button>
            </div>
            <ul class="todo-list" id="todoList"></ul>
          </div>
        </div>
      </section>

      <!-- IDEAS PAGE -->
      <section class="page" id="page-ideas">
        <div class="page-header">
          <h1 class="page-title">ğŸ’¡ Idea Board</h1>
          <p class="page-subtitle">Catch every spark before it fades! âœ¨</p>
        </div>

        <div class="card idea-form-card">
          <div class="idea-form">
            <input type="text" id="ideaTitle" class="text-input" placeholder="What's your idea? ğŸ’­" />
            <textarea id="ideaDesc" class="text-area" rows="2" placeholder="More details... (optional)"></textarea>
            <div class="idea-form-row">
              <label class="field-label">Plan to start:</label>
              <input type="date" id="ideaStartDate" class="date-input" />
              <label class="field-label">Deadline <span
                  style="font-size:11px;color:var(--text-light)">(optional)</span>:</label>
              <input type="date" id="ideaDeadline" class="date-input" />
            </div>
            <div class="idea-form-row">
              <button class="btn-primary" id="addIdeaBtn">Capture ğŸ’¡</button>
            </div>
          </div>
        </div>

        <div class="ideas-grid" id="ideasGrid"></div>
      </section>

      <!-- HABITS PAGE -->
      <section class="page" id="page-habits">
        <div class="page-header">
          <h1 class="page-title">ğŸ“¿ Habit Tracker</h1>
          <p class="page-subtitle">Small steps, big changes. ğŸŒ±</p>
        </div>

        <div class="habit-two-col">
          <!-- LEFT: Manage Habits -->
          <div class="habit-manage-col">
            <div class="card habit-manager-card">
              <div class="card-header">
                <h2>My Habits</h2>
                <button class="btn-primary" id="addHabitBtn">+ New</button>
              </div>
              <div id="habitList" class="habit-chips-list"></div>
            </div>
          </div>

          <!-- RIGHT: Monthly Tracker -->
          <div class="habit-tracker-col">
            <div class="card">
              <div class="card-header">
                <h2>ğŸ“… Monthly Tracker</h2>
                <div class="month-nav">
                  <button class="btn-icon" id="habitMonthPrev">â€¹</button>
                  <span id="habitMonthLabel"></span>
                  <button class="btn-icon" id="habitMonthNext">â€º</button>
                </div>
              </div>
              <div id="habitGrid" class="habit-grid-container"></div>
            </div>
          </div>
        </div>

        <!-- Add/Edit Habit Modal -->
        <div class="modal-overlay hidden" id="addHabitModal">
          <div class="modal">
            <h3 id="habitModalTitle">New Habit âœ¨</h3>
            <input type="text" id="newHabitName" class="text-input" placeholder="Habit name (e.g. Exercise)" />
            <textarea id="newHabitDetails" class="text-area" rows="2"
              placeholder="Details / notes (optional, e.g. 30 min jog every morning)"></textarea>
            <div class="habit-emoji-picker">
              <label class="field-label">Pick an emoji:</label>
              <div class="emoji-grid" id="emojiGrid"></div>
            </div>
            <div class="modal-actions">
              <button class="btn-primary" id="saveNewHabitBtn">Save ğŸ’¾</button>
              <button class="btn-soft" id="cancelNewHabitBtn">Cancel</button>
            </div>
          </div>
        </div>
      </section>

      <!-- DIARY PAGE -->
      <section class="page" id="page-diary">
        <div class="page-header">
          <h1 class="page-title">ğŸ“– Daily Diary</h1>
          <p class="page-subtitle">Your private little corner. ğŸŒ·</p>
        </div>

        <div class="diary-layout">
          <!-- Left: Entry editor -->
          <div class="diary-editor">
            <div class="card">
              <div class="diary-entry-header">
                <div>
                  <h2 id="diaryEntryDate">Today</h2>
                  <p class="diary-prompt">How was your day? ğŸŒ¸</p>
                </div>
                <div class="mood-picker">
                  <label class="field-label">Mood:</label>
                  <div class="mood-options" id="moodOptions"></div>
                </div>
              </div>
              <textarea id="diaryText" class="diary-textarea"
                placeholder="Write anything... your thoughts, what happened, what you're grateful for ğŸŒ¸"></textarea>
              <div class="diary-actions">
                <button class="btn-primary" id="saveDiaryBtn">Save Entry ğŸ’¾</button>
                <button class="btn-soft" id="clearDiaryBtn">Clear</button>
              </div>
            </div>
          </div>

          <!-- Right: Past entries -->
          <div class="diary-history">
            <div class="card">
              <h2>Past Entries ğŸ—‚ï¸</h2>
              <div id="diaryHistory" class="diary-history-list"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- PROGRESS / STATS PAGE -->
      <section class="page" id="page-stats">
        <div class="page-header">
          <h1 class="page-title">ğŸ“Š Progress Tracker</h1>
          <p class="page-subtitle">Break it down, check it off, glow up! ğŸ’ª</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>My Big Goals</h2>
            <button class="btn-primary" id="addBigGoalBtn">+ New Goal</button>
          </div>
          <div id="bigGoalsList" class="big-goals-list"></div>
        </div>

        <!-- Add Big Goal Modal -->
        <div class="modal-overlay hidden" id="bigGoalModal">
          <div class="modal modal-lg">
            <h3 id="bigGoalModalTitle">New Big Goal ğŸ¯</h3>
            <input type="text" id="bigGoalTitle" class="text-input" placeholder="Goal name (e.g. Pass IELTS 7.0)" />
            <div class="modal-actions">
              <button class="btn-primary" id="saveBigGoalBtn">Create ğŸ¯</button>
              <button class="btn-soft" id="cancelBigGoalBtn">Cancel</button>
            </div>
          </div>
        </div>

        <!-- Add Sub-task Modal -->
        <div class="modal-overlay hidden" id="subTaskModal">
          <div class="modal modal-lg">
            <h3>Add Sub-task âœï¸</h3>
            <input type="text" id="subTaskName" class="text-input" placeholder="Sub-task name" />
            <div class="subtask-date-row">
              <label class="field-label">Deadline:</label>
              <input type="date" id="subTaskDeadline" class="date-input" />
            </div>
            <div class="modal-actions">
              <button class="btn-primary" id="saveSubTaskBtn">Add âœ…</button>
              <button class="btn-soft" id="cancelSubTaskBtn">Cancel</button>
            </div>
          </div>
        </div>
      </section>

      <!-- POMODORO PAGE -->
      <section class="page" id="page-pomodoro">
        <div class="page-header">
          <h1 class="page-title">â±ï¸ Focus Timer</h1>
          <p class="page-subtitle">One pomodoro at a time. You've got this! ğŸ…</p>
        </div>

        <div class="pomodoro-center">
          <div class="card pomodoro-card">
            <div class="pomo-mode-tabs">
              <button class="pomo-tab active" data-mode="work">ğŸ… Focus</button>
              <button class="pomo-tab" data-mode="short">â˜• Short Break</button>
              <button class="pomo-tab" data-mode="long">ğŸŒ¿ Long Break</button>
            </div>
            <div class="pomo-timer-display">
              <svg class="pomo-ring" viewBox="0 0 200 200">
                <circle class="pomo-ring-bg" cx="100" cy="100" r="90" />
                <circle class="pomo-ring-progress" cx="100" cy="100" r="90" id="pomoRingProgress" />
              </svg>
              <div class="pomo-time-center">
                <div class="pomo-time" id="pomoTime">25:00</div>
                <div class="pomo-label" id="pomoLabel">Focus Time</div>
              </div>
            </div>
            <!-- Duration editor -->
            <div class="pomo-duration-editor">
              <span class="pomo-dur-label">Duration (min):</span>
              <button class="btn-icon pomo-dur-btn" id="pomoDurMinus">âˆ’</button>
              <span class="pomo-dur-val" id="pomoDurVal">25</span>
              <button class="btn-icon pomo-dur-btn" id="pomoDurPlus">+</button>
            </div>
            <div class="pomo-controls">
              <button class="btn-icon pomo-btn" id="pomoStart">â–¶</button>
              <button class="btn-icon pomo-btn" id="pomoPause">â¸</button>
              <button class="btn-icon pomo-btn" id="pomoReset">â†º</button>
            </div>
            <div class="pomo-session-count">
              ğŸ… Sessions completed today: <span id="pomoCount">0</span>
            </div>
          </div>

          <div class="card pomo-tasks-card">
            <div class="card-header">
              <h2>ğŸ¯ Focus Tasks</h2>
            </div>
            <div class="pomo-task-input-row">
              <input type="text" id="pomoTaskInput" class="text-input" placeholder="Add a task... ğŸŒ¸" />
              <button class="btn-primary" id="setPomoTaskBtn">Add</button>
            </div>
            <ul class="pomo-task-list" id="pomoTaskList"></ul>
          </div>
        </div>
      </section>

    </main>
  </div><!-- /#appContainer -->

  <!-- ===== FIREBASE SDK (v9 compat) ===== -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

  <!-- App Scripts -->
  <script src="js/firebase-config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/quotes.js"></script>
  <script src="js/goals.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/ideas.js"></script>
  <script src="js/habits.js"></script>
  <script src="js/diary.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/pomodoro.js"></script>
  <script src="js/reminders.js"></script>
  <script src="js/app.js"></script>
</body>

</html>
